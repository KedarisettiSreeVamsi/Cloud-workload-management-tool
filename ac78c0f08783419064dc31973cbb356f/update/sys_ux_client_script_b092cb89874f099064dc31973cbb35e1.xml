<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_client_script">
    <sys_ux_client_script action="INSERT_OR_UPDATE">
        <includes/>
        <macroponent display_value="Data Navigator">2492cb89874f099064dc31973cbb35c0</macroponent>
        <name>Update breadcrumb items</name>
        <required_translations/>
        <script><![CDATA[/**
 * Update current breadcrumb items with latest selected root
 * @param {params} params
 * @param {api} params.api
 * @param {any} params.event
 * @param {any} params.imports
 * @param {ApiHelpers} params.helpers
 */
function handler({ api, event, helpers, imports }) {

  let { breadcrumbsItems = [], breadcrumbsSkipUpdate = false } = api.state;
  if (breadcrumbsSkipUpdate) {
    api.setState("breadcrumbsSkipUpdate", false);
    return;
  }

  if (api.context.props.timestamp == '1') {
      breadcrumbsItems = [];
  }
    
  const { data_nav_config } = api.data;
  const { output = {} } = data_nav_config;
  const { nodeData = [] } = output;
  const rootData = nodeData.find(data => data.sector.isRoot);
  if(!rootData){
    return;
  }
  
  const [currentRoot] = rootData.nodes;
  const { subTitle, title, table, sysId } = currentRoot;
  // skip if any required data is missing
  if(!subTitle || !title || !table || !sysId){
    return;
  }

  const label = `${subTitle}: ${title}`;
  const index = breadcrumbsItems.length;
  const href = "javascript:void(0)";
  const newItems = [...breadcrumbsItems, { label, index, sysId, table, href }];

  api.setState("breadcrumbsItems", newItems);
}]]></script>
        <script_api_version>2.0.0</script_api_version>
        <sys_class_name>sys_ux_client_script</sys_class_name>
        <sys_created_by>sjansse2</sys_created_by>
        <sys_created_on>2022-04-22 15:35:28</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>b092cb89874f099064dc31973cbb35e1</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Update breadcrumb items</sys_name>
        <sys_package display_value="Cloud Workload Management Tool" source="x_asmln_cloud_wo_1">ac78c0f08783419064dc31973cbb356f</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Cloud Workload Management Tool">ac78c0f08783419064dc31973cbb356f</sys_scope>
        <sys_update_name>sys_ux_client_script_b092cb89874f099064dc31973cbb35e1</sys_update_name>
        <sys_updated_by>sjansse2</sys_updated_by>
        <sys_updated_on>2022-04-22 15:35:28</sys_updated_on>
        <type>default</type>
    </sys_ux_client_script>
</record_update>
